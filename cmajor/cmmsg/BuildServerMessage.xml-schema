// =================================
// Copyright (c) 2021 Seppo Laakko
// Distributed under the MIT license
// =================================

#include <cmajor/cmmsg/MsgApi.hpp>

class api(MSG_API) StopBuildRequest
{
}

class api(MSG_API) StopBuildReply
{
}

class api(MSG_API) KeepAliveBuildRequest
{
}

class api(MSG_API) KeepAliveBuildReply
{
}

class api(MSG_API) BuildRequest
{
    string messageKind;
    string backend;
    string config;
    string optimizationLevel;
    string filePath;
    string[] defines;
    string numBuildThreads;
    string toolChain;
    bool verbose;
    bool quiet;
    bool clean;
    bool strictNothrow;
    bool emitIR;
    bool emitOptIR;
    bool linkWithDebugRuntime;
    bool linkUsingMsLink;
    bool rebuild;
    bool buildAllDependencies;
    bool forceDebugInfo;
    bool forceNoDebugInfo;
    bool disableModuleCache;
    bool singleThreadedCompile;
    bool disableCodeGen;
    bool justMyCode;
}

class api(MSG_API) CompileError
{
    string message;
    string project;
    string file;
    int line;
    int scol;
    int ecol;
}

class api(MSG_API) BuildReply
{
    bool requestValid;
    string requestErrorMessage;
    string logException;
    string time;
    bool success;
    CompileError[] errors;
}

class api(MSG_API) LogBuildMessageRequest
{
    string message;
}

class api(MSG_API) LogBuildMessageReply
{
    bool ok;
}

class api(MSG_API) BuildProgressMessage
{
}

class api(MSG_API) GenericBuildErrorReply
{
    string error;
}

class api(MSG_API) CacheModuleRequest
{
    string projectName;
    string projectFilePath;
    string backend;
    string config;
}

class api(MSG_API) CacheModuleReply
{
    string error;
}

class api(MSG_API) DefinitionSourceLocation
{
    string file;
    int line;
    int scol;
    int ecol;
}

class api(MSG_API) GetDefinitionRequest
{
    string projectName;
    string projectFilePath;
    string backend;
    string config;
    string identifier;
    DefinitionSourceLocation identifierLocation;
}

class api(MSG_API) GetDefinitionReply
{
    DefinitionSourceLocation definitionLocation;
    bool ok;
    string error;
}

// =================================
// Copyright (c) 2020 Seppo Laakko
// Distributed under the MIT license
// =================================

using System;
using System.Collections;

namespace Cm.Service.Build
{
    [json]
    public class StopRequest
    {
        public nothrow StopRequest() : messageKind("stopRequest")
        {
        }
        public string messageKind;
    }

    [json]
    public class StopReply
    {
        public nothrow StopReply() : messageKind("stopReply")
        {
        }
        public string messageKind;
    }

    [json]
    public class KeepAliveRequest
    {
        public nothrow KeepAliveRequest() : messageKind("keepAliveRequest")
        {
        }
        public string messageKind;
    }

    [json]
    public class KeepAliveReply
    {
        public nothrow KeepAliveReply() : messageKind("keepAliveReply")
        {
        }
        public string messageKind;
    }

    [json]
    public class BuildRequest
    {
        public nothrow BuildRequest() : messageKind("buildRequest")
        {
        }
        public string messageKind;
        public string backend;
        public string config;
        public string optimizationLevel;
        public string filePath;
        public List<string> defines;
        public string numBuildThreads;
        public string toolChain;
        public bool verbose;
        public bool quiet;
        public bool clean;
        public bool strictNothrow;
        public bool emitIR;
        public bool emitOptIR;
        public bool linkWithDebugRuntime;
        public bool linkUsingMsLink;
        public bool rebuild;
        public bool buildAllDependencies;
        public bool forceDebugInfo;
        public bool forceNoDebugInfo;
        public bool disableModuleCache;
        public bool singleThreadedCompile;
        public bool disableCodeGen;
        public bool justMyCode;
    }

    [json]
    public class CompileError
    {
        public string message;
        public string project;
        public string file;
        public string line;
        public string scol;
        public string ecol;
    }

    [json]
    public class BuildReply
    {
        public nothrow BuildReply() : messageKind("buildReply")
        {
        }
        public string messageKind;
        public bool requestValid;
        public string requestErrorMessage;
        public string logException;
        public string time;
        public bool success;
        public List<CompileError> errors;
    }

    [json]
    public class LogMessageRequest
    {
        public nothrow LogMessageRequest() : messageKind("logMessageRequest")
        {
        }
        public string messageKind;
        public string message;
    }

    [json]
    public class LogMessageReply
    {
        public nothrow LogMessageReply() : messageKind("logMessageReply")
        {
        }
        public string messageKind;
        public bool ok;
    }

    [json]
    public class ProgressMessage
    {
        public nothrow ProgressMessage() : messageKind("progressMessage")
        {
        }
        public string messageKind;
    }

    [json]
    public class GenericErrorReply
    {
        public nothrow GenericErrorReply() : messageKind("genericErrorReply")
        {
        }
        public string messageKind;
        public string error;
    }

    [json]
    public class SourceLocation
    {
        public nothrow SourceLocation()
        {
        }
        public nothrow SourceLocation(const string& file_, const string& line_, const string& scol_, const string& ecol_) : file(file_), line(line_), scol(scol_), ecol(ecol_)
        {
        }
        public string file;
        public string line;
        public string scol;
        public string ecol;
    }

    public nothrow bool operator==(const SourceLocation& left, const SourceLocation& right)
    {
        return left.file == right.file && left.line == right.line;
    }

    [json]
    public class GetDefinitionRequest
    {
        public nothrow GetDefinitionRequest() : messageKind("getDefinitionRequest")
        {
        }
        public string messageKind;
        public string projectName;
        public string projectFilePath;
        public string backend;
        public string config;
        public string identifier;
        public SourceLocation identifierLocation;
    }

    [json]
    public class GetDefinitionReply
    {
        public nothrow GetDefinitionReply() : messageKind("getDefinitionReply")
        {
        }
        public string messageKind;
        public SourceLocation definitionLocation;
        public bool ok;
        public string error;
    }

    [json]
    public class CacheModuleRequest
    {
        public nothrow CacheModuleRequest() : messageKind("cacheModuleRequest")
        {
        }
        public string messageKind;
        public string projectName;
        public string projectFilePath;
        public string backend;
        public string config;
    }

    [json]
    public class CacheModuleReply
    {
        public nothrow CacheModuleReply() : messageKind("cacheModuleReply")
        {
        }
        public string messageKind;
        public string error;
    }
}



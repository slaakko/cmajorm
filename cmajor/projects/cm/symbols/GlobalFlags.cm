// =================================
// Copyright (c) 2021 Seppo Laakko
// Distributed under the MIT license
// =================================

using System;

namespace Cm.Symbols
{
    public enum GlobalFlags : ulong
    {
        none = 0u,
        verbose = 1u << 0u,
        quiet = 1u << 1u,
        release = 1u << 2u,
        clean = 1u << 3u,
        debugParsing = 1u << 4u,
        emitLlvm = 1u << 5u,
        emitOptLlvm = 1u << 6u,
        linkWithDebugRuntime = 1u << 7u,
        linkUsingMsLink = 1u << 8u,
        ide = 1u << 9u,
        strictNothrow = 1u << 10u,
        time = 1u << 11u,
        info = 1u << 12u,
        unitTest = 1u << 13u,
        profile = 1u << 14u,
        generateDebugInfo = 1u << 15u,
        msbuild = 1u << 16u,
        ast2xml = 1u << 17u,
        sym2xml = 1u << 18u,
        bdt2xml = 1u << 19u,
        cmdoc = 1u << 20u,
        optimizeCmDoc = 1u << 21u,
        singleThreadedCompile = 1u << 22u,
        debugCompile = 1u << 23u,
        rebuild = 1u << 24u,
        disableCodeGen = 1u << 25u,
        disableSystem = 1u << 26u,
        justMyCodeDebugging = 1u << 27u,
        buildAll = 1u << 28u,
        printDebugMessages = 1u << 29u,
        repository = 1u << 30u,
        updateSourceFileModuleMap = 1u << 31u,
        trace = 1u << 32u
    }

    private GlobalFlags globalFlags;

    public nothrow inline bool GetGlobalFlag(GlobalFlags flag)
    {
        return (globalFlags & flag) != GlobalFlags.none;
    }

    public nothrow void SetGlobalFlag(GlobalFlags flag)
    {
        globalFlags = cast<GlobalFlags>(globalFlags | flag);
    }

    public nothrow void ResetGlobalFlags()
    {
        globalFlags = GlobalFlags.none;
    }
}

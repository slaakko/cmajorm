using System;

class Foo
{
    public default virtual ~Foo();
    public virtual void foo()
    {
        void* m = MemAlloc(4096);
        long r = stack_trace(m, 4096);
        MemFree(m);
    }
}

class Bar : Foo
{
    public override void foo()
    {
    }
}

class Baz
{
    public default virtual ~Baz();
}

void main()
{
    Foo f;
    Bar b;
    Foo* foo = &f;
    foo->foo();
    foo = &b;
    foo->foo();
    Baz baz;
}

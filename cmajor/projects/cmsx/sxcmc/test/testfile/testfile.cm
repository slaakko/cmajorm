using System;
using System.Os;
using System.IO;

int main()
{
    try
    {
        int fd = Create("/home/slaakko/testfile", EncodeMode(FileType.regular, cast<Access>(Access.read | Access.write), cast<Access>(Access.read | Access.write), Access.read, false));
        string s = "foobar\n";
        Write(fd, s.Chars(), s.Length());
        Close(fd);
    }
    catch (const Exception& ex)
    {
        Console.Error() << ex.ToString() << endl();
        return 1;
    }
    return 0;
}

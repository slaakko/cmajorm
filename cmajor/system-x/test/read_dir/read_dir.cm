using System;
using System.IO;

void PrintDir(const string& dir)
{
	Console.WriteLine(dir + ":");
	DirectoryReader reader(dir);
	DirectoryEntry entry;
	while (reader.Read(entry))
	{
		Console.WriteLine(entry.name);
	}
	Console.WriteLine();
}

int main(int argc, const char** argv)
{
	try
	{
		if (argc < 2)
		{
			throw Exception("usage: read_dir <dir_name>");
		}
		for (int i = 1; i < argc; ++i)
		{
			string arg = argv[i];
			PrintDir(arg);
		}
	}
	catch (const Exception& ex)
	{
		Console.Error() << ex.ToString() << endl();
		return 1;
	}
	return 0;
}
using System;
using System.Os;

int main()
{
	try
	{
		int pid = Fork();
		if (pid != 0)
		{
			byte exitCode = 0u;
			while (Wait(&exitCode) != -1)
			{
				string s = "child exited with code " + ToString(exitCode) + "\n";
				write(1, s.Chars(), s.Length());
			}
		}
	}
	catch (const SystemError& systemError)
	{
		string s = systemError.ToString() + "\n";
		write(1, s.Chars(), s.Length());
		return 1;
	}
	return 0;
}
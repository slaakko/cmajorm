// =================================
// Copyright (c) 2022 Seppo Laakko
// Distributed under the MIT license
// =================================

using System;
using System.Screen;

public class MainWindow	: Window
{
	public MainWindow()
	{
		MenuBar* menuBar = new MenuBar(ControlCreateParams().Defaults());
		
		AddChild(menuBar);
	}
	public override void OnKeyPressed(KeyEventArgs& args)
	{
		if (args.Handled()) return;
		if (args.Key() == keyEscape)
		{
			args.SetHandled();
			Exit();
		}
	}
	public override void OnClose(CloseEventArgs& args)
	{
		Exit();
	}
	public void Exit()
	{
		Application.Instance().Exit();
	}
}

int main(int argc, const char** argv)
{
	try
	{
		MainWindow mainWindow;
		Application.Instance().Run(mainWindow);
	}
	catch (const Exception& ex)
	{
		Terminal.Error() << ex.ToString() << endl();
		return 1;
	}
	return 0;
}

using System;

class Foo
{
	public nothrow Foo() : name("foo")
	{
	}
	public const string& Name() const
	{
		return name;
	}
	private string name;
}

Foo* GetFoo()
{
	UniquePtr<Foo> foo;
	foo.Reset(new Foo());
	Foo* f = foo.Release();
	return f;
}

Foo* GetFooBug()
{
	UniquePtr<Foo> foo;
	foo.Reset(new Foo());
	return foo.Release();
}

void main()
{
	UniquePtr<Foo> fooBug(GetFooBug());
	Console.Out() << fooBug->Name() << endl();
	UniquePtr<Foo> foo(GetFoo());
	Console.Out() << foo->Name() << endl();
}

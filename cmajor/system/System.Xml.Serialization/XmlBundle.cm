// =================================
// Copyright (c) 2021 Seppo Laakko
// Distributed under the MIT license
// =================================

using System;
using System.Collections;

namespace System.Xml.Serialization
{
    public class XmlBundle
    {
        public nothrow void Add(XmlSerializable xmlSerializable)
        {
            XmlBundle* prevOwner = xmlSerializable.XmlOwner();
            if (prevOwner != null)
            {
                prevOwner->Remove(xmlSerializable.XmlId());
            }
            xmlSerializable.SetXmlOwner(this);
            objectMap[xmlSerializable.XmlId()] = xmlSerializable.XmlThis();
        }
        public nothrow void Remove(const Uuid& xmlId)
        {
            objectMap.Remove(xmlId);
        }
        private HashMap<Uuid, void*> objectMap;
    }
}


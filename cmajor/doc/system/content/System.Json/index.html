<html>
 <head>
  <meta charset="utf-8"/>
  <title>System.Json Module</title>
  <link href="../../style/style.css" rel="stylesheet" type="text/css"/>
 </head>
 <body>
  <h1>System.Json Module</h1>
  <span xml:space="preserve"><p class="description" xml:space="preserve">The System.Json module contains support for <a href="https://www.json.org/"> JSON</a> serialization.</p><span xml:space="preserve"><p class="description" xml:space="preserve">The JSON serialization support is implemented in half by the compiler and in half by the <a href="doc/../../System.Json/doc/ns_System.Json.html">Json</a> library. The compiler processes <a href="../../../langref/langref.html#attributes"> attributes</a> named <strong> json</strong> and <strong> jsonFieldName</strong> that are attached to user-defined JSON serializable classes and generates serialization code for them. The <a href="doc/../../System.Json/doc/ns_System.Json.html">Json</a> library contains conversion function overloads that call the compiler generated serialization code.</p><p class="description" xml:space="preserve">When a user-defined class has a <strong> json</strong> attribute, an object of that class can be serialized to a JSON string. Construction of the JSON string from a JSON serializable class is a three-step process. First an object of the class to serialize is created with <strong> new</strong> and assigned to a <a href="doc/../../System.Base/doc/class_UniquePtr_T_793F841C13E9DD3A6869243C74F1D948C0E04009.html">UniquePtr</a> . Then a non-member <a href="doc/../../System.Json/doc/ns_System.Json.html#function_ToJson_14356EE699F7663903DB09AB9EFE1B206802DDE8">ToJson</a> library function is called with the unique pointer argument. The function returns a unique pointer to a <a href="doc/../../System.Json/doc/class_JsonValue_B86942C2856CC5758E1FB19BBBE97E4002D4008A.html">JsonValue</a> abstract class. Finally the JSON string is generated by calling the <a href="doc/../../System.Json/doc/class_JsonValue_B86942C2856CC5758E1FB19BBBE97E4002D4008A.html#member_function_ToString_JsonValue_0E8D02CC91EA26B2A9A8AF1C11DF12FD5FE86F31">ToString</a> member function of the <a href="doc/../../System.Json/doc/class_JsonValue_B86942C2856CC5758E1FB19BBBE97E4002D4008A.html">JsonValue</a> .</p><p class="description" xml:space="preserve">A user-defined class having a <strong> json</strong> attribute adds also support for parsing an object of that class back from a JSON string. The parsing is a multi-step process. First a unique pointer to a <a href="doc/../../System.Json/doc/class_JsonValue_B86942C2856CC5758E1FB19BBBE97E4002D4008A.html">JsonValue</a> is constructed by calling the <a href="doc/../../System.Json/doc/ns_System.Json.html#function_ParseJson_DBF1730C39BEE47518DDF489C3C1CA7CC4D29DFF">ParseJson</a> library function with a JSON string. Then empty unique pointer of a user-defined class is constructed. Then the <a href="doc/../../System.Json/doc/ns_System.Json.html#function_FromJson_97B0CE17747A8F5A6697880760B61937E269F734">FromJson</a> library function is called with the <a href="doc/../../System.Json/doc/class_JsonValue_B86942C2856CC5758E1FB19BBBE97E4002D4008A.html">JsonValue</a> and the constructed user-defined class arguments. This assigns a value to the unique pointer of the user-defined class. Finally the actual type of the object can be queried by <strong> is</strong> or <strong> as</strong> operators, casted to the right user-defined type and processed.</p><h2>Example</h2><p class="description" xml:space="preserve">This <a href="../../../code/json/cmdoc/content/vehicles/file/vehicles.cm.html"> vehicles</a> example program shows how to construct JSON serializable classes, how to serialize them to JSON strings and parse them back from JSON strings.</p><p class="description" xml:space="preserve">The <em> SerializeOneVehicle()</em> function of the example program contructs a single JSON serializable <strong> Car</strong> object, serializes it to a JSON string, parses it back from the JSON string and writes the data of it to console. The program called with argument "1" prints: <pre> {"class":"Vehicles.Car", "object":{"model":"Porsche", "registrationNumber":"ABC-123", "speed":200}} <br/>
   Porsche: ABC-123 200</pre></p><p class="description" xml:space="preserve">The <em> SerializeListOfVehicles()</em> function of the example program constructs a <a href="doc/../../System.Base/doc/class_List_T_4E42CF5913BEB21F5260DEFEC239180C94460B11.html">List</a> of <strong> Vehicle</strong> s, serializer them to a JSON string, parses them back from the JSON string and writes their data to console. The program called with no arguments prints: <pre> [{"class":"Vehicles.Truck", "object":{"model":"Volvo", "registrationNumber":"XYZ-987", "speed":100, "weight":1000}}, <br/>
   {"class":"Vehicles.Car", "object":{"model":"Peugeot", "registrationNumber":"PRQ-567", "speed":150}}, <br/>
   {"class":"Vehicles.Bicycle", "object":{"brand":"Pegoretti", "speed":30}}] <br/>
   Volvo: XYZ-987 100 1000 <br/>
   Peugeot: PRQ-567 150 <br/>
   Pegoretti: 30</pre></p></span></span>
  <h2>Grammars</h2>
  <table>
   <tr>
    <td xml:space="preserve"><a href="doc/json-lexical-grammar.html">JSON Lexical Grammar</a></td>
   </tr>
   <tr>
    <td xml:space="preserve"><a href="doc/json-grammar.html">JSON Grammar</a></td>
   </tr>
  </table>
  <h2>Namespaces</h2>
  <table>
   <tr>
    <td>
     <a href="doc/ns_JsonTokens.html">JsonTokens</a>
    </td>
   </tr>
   <tr>
    <td>
     <a href="doc/ns_System.html">System</a>
    </td>
   </tr>
   <tr>
    <td/>
    <td>
     <a href="doc/ns_System.Json.html">Json</a>
    </td>
   </tr>
  </table>
  <h2>Files</h2>
  <table>
   <tr>
    <td xml:space="preserve"><a href="file/Json.cm.html">System.Json/Json.cm</a></td>
   </tr>
   <tr>
    <td xml:space="preserve"><a href="file/JsonClassFactory.cm.html">System.Json/JsonClassFactory.cm</a></td>
   </tr>
   <tr>
    <td xml:space="preserve"><a href="file/JsonClassMap.cm.html">System.Json/JsonClassMap.cm</a></td>
   </tr>
   <tr>
    <td xml:space="preserve"><a href="file/JsonExport.cm.html">System.Json/JsonExport.cm</a></td>
   </tr>
   <tr>
    <td xml:space="preserve"><a href="file/JsonImport.cm.html">System.Json/JsonImport.cm</a></td>
   </tr>
   <tr>
    <td xml:space="preserve"><a href="file/JsonLexer.cm.html">System.Json/JsonLexer.cm</a></td>
   </tr>
   <tr>
    <td xml:space="preserve"><a href="file/JsonLexer.lexer.html">System.Json/JsonLexer.lexer</a></td>
   </tr>
   <tr>
    <td xml:space="preserve"><a href="file/JsonParser.cm.html">System.Json/JsonParser.cm</a></td>
   </tr>
   <tr>
    <td xml:space="preserve"><a href="file/JsonParser.parser.html">System.Json/JsonParser.parser</a></td>
   </tr>
   <tr>
    <td xml:space="preserve"><a href="file/JsonTokens.cm.html">System.Json/JsonTokens.cm</a></td>
   </tr>
   <tr>
    <td xml:space="preserve"><a href="file/TokenValueParsers.cm.html">System.Json/TokenValueParsers.cm</a></td>
   </tr>
  </table>
  <h2>Classes</h2>
  <table>
   <tr>
    <td class="rightAlignedCol" xml:space="preserve"><span class="kw">public</span>&nbsp;<span class="kw">static</span>&nbsp;<span class="kw">class</span></td>
    <td>
     <a href="doc/class_JsonClassMap_CC1A067B0F9D66D83D5E6167F8CE466F5B1D2EA6.html">JsonClassMap</a>
    </td>
   </tr>
   <tr>
    <td class="rightAlignedCol" xml:space="preserve"><span class="kw">public</span>&nbsp;<span class="kw">class</span></td>
    <td>
     <a href="doc/class_JsonLexer_C48B52C0C81DC3674C6280261D8793084F6A8CE8.html">JsonLexer</a>
    </td>
   </tr>
   <tr>
    <td class="rightAlignedCol" xml:space="preserve"><span class="kw">public</span>&nbsp;<span class="kw">static</span>&nbsp;<span class="kw">class</span></td>
    <td>
     <a href="doc/class_JsonParser_43272EE5F08B6D1C5EE5DB9CB4C250B6FA4C0F85.html">JsonParser</a>
    </td>
   </tr>
  </table>
 </body>
</html>
